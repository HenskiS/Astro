# Production Trading System Configuration
# =========================================

# OANDA API Settings
oanda:
  account_type: "live"  # "practice" or "live" - change this to switch accounts

  # Practice account credentials
  practice:
    account_id: "${OANDA_PRACTICE_ACCOUNT_ID}"
    api_key: "${OANDA_PRACTICE_API_KEY}"

  # Live account credentials
  live:
    account_id: "${OANDA_ACCOUNT_ID}"
    api_key: "${OANDA_API_KEY}"

# Capital and Risk Management
capital:
  initial: 500
  max_drawdown: 0.15  # 15% from peak
  daily_loss_limit: 0.05  # 5% daily loss limit

# 15-Minute Strategy Settings
strategy_15m:
  enabled: true
  pairs:
    - EURUSD
    - USDJPY
    - GBPUSD
    - AUDUSD
    - USDCAD
    - USDCHF
    - NZDUSD
    - EURJPY

  # Signal generation
  min_confidence: 0.75  # 75% model probability (optimized)
  lookback_periods: 80  # 20 hours
  avoid_hours: []  # Trade 24/7 (matches backtest configuration)

  # Position sizing and limits
  position_size_pct: 0.40  # 40% of capital per trade (optimized)
  max_positions_total: 1000  # No limit (matches backtest)
  max_positions_per_pair: 100  # No limit (matches backtest)

  # Exit parameters (optimized: 44.2% CAGR, -2.78% max DD, 63.3% win rate)
  immediate_stop_loss_pct: -0.05  # -5% emergency stop (any time)
  emergency_stop_periods: 24  # 6 hours (24 bars)
  emergency_stop_loss_pct: -0.04  # -4% for loser detection in 24-bar check
  trailing_stop_trigger: 'on_target'  # Activate when breakout target is hit
  trailing_stop_pct: 0.85  # Trail at 85% from target to peak (optimized)
  max_hold_bars: 32  # 8 hours max hold time (optimized)

  # Execution
  slippage_pct: 0.0001  # 0.01% = 1 pip

# Monitoring and Alerts
monitoring:
  telegram:
    enabled: true
    bot_token: "${TELEGRAM_BOT_TOKEN}"
    chat_id: "${TELEGRAM_CHAT_ID}"
    daily_summary_time: "00:00"  # UTC

  logging:
    level: "INFO"  # DEBUG, INFO, WARNING, ERROR, CRITICAL
    file: "logs/production_trader.log"
    max_size_mb: 100
    backup_count: 10

# State Persistence
state:
  json_file: "state/trading_state.json"
  db_file: "state/trading_history.db"
  save_interval_minutes: 15

# Model Settings
models:
  directory: "models"  # Local models directory (production_trader/models/)
  feature_data_dir: "../data_15m"  # Project root data

# System Settings
system:
  check_interval_seconds: 30  # Main loop sleep interval
  position_update_interval_minutes: 1
  emergency_check_interval_minutes: 5
